{"dependencies":[{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":49,"index":49}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":50},"end":{"line":2,"column":69,"index":119}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"TokenManager\", {\n    enumerable: true,\n    get: function () {\n      return TokenManager;\n    }\n  });\n  var _expoSecureStore = require(_dependencyMap[0], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  const ACCESS_TOKEN_KEY = 'access_token';\n  const REFRESH_TOKEN_KEY = 'refresh_token';\n  const TOKEN_EXPIRY_KEY = 'token_expiry';\n  const REFRESH_EXPIRY_KEY = 'refresh_expiry';\n\n  // Use SecureStore for native, AsyncStorage for web\n  const isWeb = Platform.default.OS === 'web';\n  const storage = {\n    async setItem(key, value) {\n      if (isWeb) {\n        await AsyncStorage.default.setItem(key, value);\n      } else {\n        await SecureStore.setItemAsync(key, value);\n      }\n    },\n    async getItem(key) {\n      if (isWeb) {\n        return await AsyncStorage.default.getItem(key);\n      } else {\n        return await SecureStore.getItemAsync(key);\n      }\n    },\n    async deleteItem(key) {\n      if (isWeb) {\n        await AsyncStorage.default.removeItem(key);\n      } else {\n        await SecureStore.deleteItemAsync(key);\n      }\n    }\n  };\n  const TokenManager = {\n    // Store tokens securely\n    async storeTokens(accessToken, refreshToken, expiresIn, refreshExpiresIn) {\n      const accessExpiry = Date.now() + expiresIn * 1000;\n      const refreshExpiry = Date.now() + refreshExpiresIn * 1000;\n      await Promise.all([storage.setItem(ACCESS_TOKEN_KEY, accessToken), storage.setItem(REFRESH_TOKEN_KEY, refreshToken), storage.setItem(TOKEN_EXPIRY_KEY, accessExpiry.toString()), storage.setItem(REFRESH_EXPIRY_KEY, refreshExpiry.toString())]);\n    },\n    // Get access token\n    async getAccessToken() {\n      return await storage.getItem(ACCESS_TOKEN_KEY);\n    },\n    // Get refresh token\n    async getRefreshToken() {\n      return await storage.getItem(REFRESH_TOKEN_KEY);\n    },\n    // Check if access token is expired or about to expire (within 5 minutes)\n    async isAccessTokenExpired() {\n      const expiry = await storage.getItem(TOKEN_EXPIRY_KEY);\n      if (!expiry) return true;\n      const expiryTime = parseInt(expiry);\n      const now = Date.now();\n      const fiveMinutes = 5 * 60 * 1000;\n      return now >= expiryTime - fiveMinutes;\n    },\n    // Check if refresh token is expired\n    async isRefreshTokenExpired() {\n      const expiry = await storage.getItem(REFRESH_EXPIRY_KEY);\n      if (!expiry) return true;\n      const expiryTime = parseInt(expiry);\n      return Date.now() >= expiryTime;\n    },\n    // Clear all tokens\n    async clearTokens() {\n      await Promise.all([storage.deleteItem(ACCESS_TOKEN_KEY), storage.deleteItem(REFRESH_TOKEN_KEY), storage.deleteItem(TOKEN_EXPIRY_KEY), storage.deleteItem(REFRESH_EXPIRY_KEY)]);\n    },\n    // Refresh access token\n    async refreshAccessToken(apiUrl) {\n      try {\n        const refreshToken = await this.getRefreshToken();\n        if (!refreshToken) {\n          return false;\n        }\n        const response = await fetch(`${apiUrl}/api/mobile/auth/refresh`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            refresh_token: refreshToken\n          })\n        });\n        if (response.ok) {\n          const data = await response.json();\n          await this.storeTokens(data.access_token, data.refresh_token, data.expires_in, data.refresh_expires_in);\n          return true;\n        }\n        return false;\n      } catch (error) {\n        console.error('Token refresh error:', error);\n        return false;\n      }\n    }\n  };\n});","lineCount":132,"map":[[27,2,39,0,"Object"],[27,8,39,0],[27,9,39,0,"defineProperty"],[27,23,39,0],[27,24,39,0,"exports"],[27,31,39,0],[28,4,39,0,"enumerable"],[28,14,39,0],[29,4,39,0,"get"],[29,7,39,0],[29,18,39,0,"get"],[29,19,39,0],[30,6,39,0],[30,13,39,0,"TokenManager"],[30,25,39,0],[31,4,39,0],[32,2,39,0],[33,2,1,0],[33,6,1,0,"_expoSecureStore"],[33,22,1,0],[33,25,1,0,"require"],[33,32,1,0],[33,33,1,0,"_dependencyMap"],[33,47,1,0],[34,2,1,0],[34,6,1,0,"SecureStore"],[34,17,1,0],[34,20,1,0,"_interopNamespace"],[34,37,1,0],[34,38,1,0,"_expoSecureStore"],[34,54,1,0],[35,2,2,0],[35,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[35,42,2,0],[35,45,2,0,"require"],[35,52,2,0],[35,53,2,0,"_dependencyMap"],[35,67,2,0],[36,2,2,0],[36,6,2,0,"AsyncStorage"],[36,18,2,0],[36,21,2,0,"_interopDefault"],[36,36,2,0],[36,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[36,73,2,0],[37,2,2,69],[37,6,2,69,"_reactNativeWebDistExportsPlatform"],[37,40,2,69],[37,43,2,69,"require"],[37,50,2,69],[37,51,2,69,"_dependencyMap"],[37,65,2,69],[38,2,2,69],[38,6,2,69,"Platform"],[38,14,2,69],[38,17,2,69,"_interopDefault"],[38,32,2,69],[38,33,2,69,"_reactNativeWebDistExportsPlatform"],[38,67,2,69],[39,2,5,0],[39,8,5,6,"ACCESS_TOKEN_KEY"],[39,24,5,22],[39,27,5,25],[39,41,5,39],[40,2,6,0],[40,8,6,6,"REFRESH_TOKEN_KEY"],[40,25,6,23],[40,28,6,26],[40,43,6,41],[41,2,7,0],[41,8,7,6,"TOKEN_EXPIRY_KEY"],[41,24,7,22],[41,27,7,25],[41,41,7,39],[42,2,8,0],[42,8,8,6,"REFRESH_EXPIRY_KEY"],[42,26,8,24],[42,29,8,27],[42,45,8,43],[44,2,10,0],[45,2,11,0],[45,8,11,6,"isWeb"],[45,13,11,11],[45,16,11,14,"Platform"],[45,24,11,22],[45,25,11,22,"default"],[45,32,11,22],[45,33,11,23,"OS"],[45,35,11,25],[45,40,11,30],[45,45,11,35],[46,2,13,0],[46,8,13,6,"storage"],[46,15,13,13],[46,18,13,16],[47,4,14,2],[47,10,14,8,"setItem"],[47,17,14,15,"setItem"],[47,18,14,16,"key"],[47,21,14,27],[47,23,14,29,"value"],[47,28,14,42],[47,30,14,59],[48,6,15,4],[48,10,15,8,"isWeb"],[48,15,15,13],[48,17,15,15],[49,8,16,6],[49,14,16,12,"AsyncStorage"],[49,26,16,24],[49,27,16,24,"default"],[49,34,16,24],[49,35,16,25,"setItem"],[49,42,16,32],[49,43,16,33,"key"],[49,46,16,36],[49,48,16,38,"value"],[49,53,16,43],[49,54,16,44],[50,6,17,4],[50,7,17,5],[50,13,17,11],[51,8,18,6],[51,14,18,12,"SecureStore"],[51,25,18,23],[51,26,18,24,"setItemAsync"],[51,38,18,36],[51,39,18,37,"key"],[51,42,18,40],[51,44,18,42,"value"],[51,49,18,47],[51,50,18,48],[52,6,19,4],[53,4,20,2],[53,5,20,3],[54,4,22,2],[54,10,22,8,"getItem"],[54,17,22,15,"getItem"],[54,18,22,16,"key"],[54,21,22,27],[54,23,22,53],[55,6,23,4],[55,10,23,8,"isWeb"],[55,15,23,13],[55,17,23,15],[56,8,24,6],[56,15,24,13],[56,21,24,19,"AsyncStorage"],[56,33,24,31],[56,34,24,31,"default"],[56,41,24,31],[56,42,24,32,"getItem"],[56,49,24,39],[56,50,24,40,"key"],[56,53,24,43],[56,54,24,44],[57,6,25,4],[57,7,25,5],[57,13,25,11],[58,8,26,6],[58,15,26,13],[58,21,26,19,"SecureStore"],[58,32,26,30],[58,33,26,31,"getItemAsync"],[58,45,26,43],[58,46,26,44,"key"],[58,49,26,47],[58,50,26,48],[59,6,27,4],[60,4,28,2],[60,5,28,3],[61,4,30,2],[61,10,30,8,"deleteItem"],[61,20,30,18,"deleteItem"],[61,21,30,19,"key"],[61,24,30,30],[61,26,30,47],[62,6,31,4],[62,10,31,8,"isWeb"],[62,15,31,13],[62,17,31,15],[63,8,32,6],[63,14,32,12,"AsyncStorage"],[63,26,32,24],[63,27,32,24,"default"],[63,34,32,24],[63,35,32,25,"removeItem"],[63,45,32,35],[63,46,32,36,"key"],[63,49,32,39],[63,50,32,40],[64,6,33,4],[64,7,33,5],[64,13,33,11],[65,8,34,6],[65,14,34,12,"SecureStore"],[65,25,34,23],[65,26,34,24,"deleteItemAsync"],[65,41,34,39],[65,42,34,40,"key"],[65,45,34,43],[65,46,34,44],[66,6,35,4],[67,4,36,2],[68,2,37,0],[68,3,37,1],[69,2,39,7],[69,8,39,13,"TokenManager"],[69,20,39,25],[69,23,39,28],[70,4,40,2],[71,4,41,2],[71,10,41,8,"storeTokens"],[71,21,41,19,"storeTokens"],[71,22,42,4,"accessToken"],[71,33,42,23],[71,35,43,4,"refreshToken"],[71,47,43,24],[71,49,44,4,"expiresIn"],[71,58,44,21],[71,60,45,4,"refreshExpiresIn"],[71,76,45,28],[71,78,46,19],[72,6,47,4],[72,12,47,10,"accessExpiry"],[72,24,47,22],[72,27,47,25,"Date"],[72,31,47,29],[72,32,47,30,"now"],[72,35,47,33],[72,36,47,34],[72,37,47,35],[72,40,47,38,"expiresIn"],[72,49,47,47],[72,52,47,50],[72,56,47,54],[73,6,48,4],[73,12,48,10,"refreshExpiry"],[73,25,48,23],[73,28,48,26,"Date"],[73,32,48,30],[73,33,48,31,"now"],[73,36,48,34],[73,37,48,35],[73,38,48,36],[73,41,48,39,"refreshExpiresIn"],[73,57,48,55],[73,60,48,58],[73,64,48,62],[74,6,50,4],[74,12,50,10,"Promise"],[74,19,50,17],[74,20,50,18,"all"],[74,23,50,21],[74,24,50,22],[74,25,51,6,"storage"],[74,32,51,13],[74,33,51,14,"setItem"],[74,40,51,21],[74,41,51,22,"ACCESS_TOKEN_KEY"],[74,57,51,38],[74,59,51,40,"accessToken"],[74,70,51,51],[74,71,51,52],[74,73,52,6,"storage"],[74,80,52,13],[74,81,52,14,"setItem"],[74,88,52,21],[74,89,52,22,"REFRESH_TOKEN_KEY"],[74,106,52,39],[74,108,52,41,"refreshToken"],[74,120,52,53],[74,121,52,54],[74,123,53,6,"storage"],[74,130,53,13],[74,131,53,14,"setItem"],[74,138,53,21],[74,139,53,22,"TOKEN_EXPIRY_KEY"],[74,155,53,38],[74,157,53,40,"accessExpiry"],[74,169,53,52],[74,170,53,53,"toString"],[74,178,53,61],[74,179,53,62],[74,180,53,63],[74,181,53,64],[74,183,54,6,"storage"],[74,190,54,13],[74,191,54,14,"setItem"],[74,198,54,21],[74,199,54,22,"REFRESH_EXPIRY_KEY"],[74,217,54,40],[74,219,54,42,"refreshExpiry"],[74,232,54,55],[74,233,54,56,"toString"],[74,241,54,64],[74,242,54,65],[74,243,54,66],[74,244,54,67],[74,245,55,5],[74,246,55,6],[75,4,56,2],[75,5,56,3],[76,4,58,2],[77,4,59,2],[77,10,59,8,"getAccessToken"],[77,24,59,22,"getAccessToken"],[77,25,59,22],[77,27,59,49],[78,6,60,4],[78,13,60,11],[78,19,60,17,"storage"],[78,26,60,24],[78,27,60,25,"getItem"],[78,34,60,32],[78,35,60,33,"ACCESS_TOKEN_KEY"],[78,51,60,49],[78,52,60,50],[79,4,61,2],[79,5,61,3],[80,4,63,2],[81,4,64,2],[81,10,64,8,"getRefreshToken"],[81,25,64,23,"getRefreshToken"],[81,26,64,23],[81,28,64,50],[82,6,65,4],[82,13,65,11],[82,19,65,17,"storage"],[82,26,65,24],[82,27,65,25,"getItem"],[82,34,65,32],[82,35,65,33,"REFRESH_TOKEN_KEY"],[82,52,65,50],[82,53,65,51],[83,4,66,2],[83,5,66,3],[84,4,68,2],[85,4,69,2],[85,10,69,8,"isAccessTokenExpired"],[85,30,69,28,"isAccessTokenExpired"],[85,31,69,28],[85,33,69,49],[86,6,70,4],[86,12,70,10,"expiry"],[86,18,70,16],[86,21,70,19],[86,27,70,25,"storage"],[86,34,70,32],[86,35,70,33,"getItem"],[86,42,70,40],[86,43,70,41,"TOKEN_EXPIRY_KEY"],[86,59,70,57],[86,60,70,58],[87,6,71,4],[87,10,71,8],[87,11,71,9,"expiry"],[87,17,71,15],[87,19,71,17],[87,26,71,24],[87,30,71,28],[88,6,73,4],[88,12,73,10,"expiryTime"],[88,22,73,20],[88,25,73,23,"parseInt"],[88,33,73,31],[88,34,73,32,"expiry"],[88,40,73,38],[88,41,73,39],[89,6,74,4],[89,12,74,10,"now"],[89,15,74,13],[89,18,74,16,"Date"],[89,22,74,20],[89,23,74,21,"now"],[89,26,74,24],[89,27,74,25],[89,28,74,26],[90,6,75,4],[90,12,75,10,"fiveMinutes"],[90,23,75,21],[90,26,75,24],[90,27,75,25],[90,30,75,28],[90,32,75,30],[90,35,75,33],[90,39,75,37],[91,6,77,4],[91,13,77,11,"now"],[91,16,77,14],[91,20,77,19,"expiryTime"],[91,30,77,29],[91,33,77,32,"fiveMinutes"],[91,44,77,44],[92,4,78,2],[92,5,78,3],[93,4,80,2],[94,4,81,2],[94,10,81,8,"isRefreshTokenExpired"],[94,31,81,29,"isRefreshTokenExpired"],[94,32,81,29],[94,34,81,50],[95,6,82,4],[95,12,82,10,"expiry"],[95,18,82,16],[95,21,82,19],[95,27,82,25,"storage"],[95,34,82,32],[95,35,82,33,"getItem"],[95,42,82,40],[95,43,82,41,"REFRESH_EXPIRY_KEY"],[95,61,82,59],[95,62,82,60],[96,6,83,4],[96,10,83,8],[96,11,83,9,"expiry"],[96,17,83,15],[96,19,83,17],[96,26,83,24],[96,30,83,28],[97,6,85,4],[97,12,85,10,"expiryTime"],[97,22,85,20],[97,25,85,23,"parseInt"],[97,33,85,31],[97,34,85,32,"expiry"],[97,40,85,38],[97,41,85,39],[98,6,86,4],[98,13,86,11,"Date"],[98,17,86,15],[98,18,86,16,"now"],[98,21,86,19],[98,22,86,20],[98,23,86,21],[98,27,86,25,"expiryTime"],[98,37,86,35],[99,4,87,2],[99,5,87,3],[100,4,89,2],[101,4,90,2],[101,10,90,8,"clearTokens"],[101,21,90,19,"clearTokens"],[101,22,90,19],[101,24,90,37],[102,6,91,4],[102,12,91,10,"Promise"],[102,19,91,17],[102,20,91,18,"all"],[102,23,91,21],[102,24,91,22],[102,25,92,6,"storage"],[102,32,92,13],[102,33,92,14,"deleteItem"],[102,43,92,24],[102,44,92,25,"ACCESS_TOKEN_KEY"],[102,60,92,41],[102,61,92,42],[102,63,93,6,"storage"],[102,70,93,13],[102,71,93,14,"deleteItem"],[102,81,93,24],[102,82,93,25,"REFRESH_TOKEN_KEY"],[102,99,93,42],[102,100,93,43],[102,102,94,6,"storage"],[102,109,94,13],[102,110,94,14,"deleteItem"],[102,120,94,24],[102,121,94,25,"TOKEN_EXPIRY_KEY"],[102,137,94,41],[102,138,94,42],[102,140,95,6,"storage"],[102,147,95,13],[102,148,95,14,"deleteItem"],[102,158,95,24],[102,159,95,25,"REFRESH_EXPIRY_KEY"],[102,177,95,43],[102,178,95,44],[102,179,96,5],[102,180,96,6],[103,4,97,2],[103,5,97,3],[104,4,99,2],[105,4,100,2],[105,10,100,8,"refreshAccessToken"],[105,28,100,26,"refreshAccessToken"],[105,29,100,27,"apiUrl"],[105,35,100,41],[105,37,100,61],[106,6,101,4],[106,10,101,8],[107,8,102,6],[107,14,102,12,"refreshToken"],[107,26,102,24],[107,29,102,27],[107,35,102,33],[107,39,102,37],[107,40,102,38,"getRefreshToken"],[107,55,102,53],[107,56,102,54],[107,57,102,55],[108,8,103,6],[108,12,103,10],[108,13,103,11,"refreshToken"],[108,25,103,23],[108,27,103,25],[109,10,104,8],[109,17,104,15],[109,22,104,20],[110,8,105,6],[111,8,107,6],[111,14,107,12,"response"],[111,22,107,20],[111,25,107,23],[111,31,107,29,"fetch"],[111,36,107,34],[111,37,107,35],[111,40,107,38,"apiUrl"],[111,46,107,44],[111,72,107,70],[111,74,107,72],[112,10,108,8,"method"],[112,16,108,14],[112,18,108,16],[112,24,108,22],[113,10,109,8,"headers"],[113,17,109,15],[113,19,109,17],[114,12,110,10],[114,26,110,24],[114,28,110,26],[115,10,111,8],[115,11,111,9],[116,10,112,8,"body"],[116,14,112,12],[116,16,112,14,"JSON"],[116,20,112,18],[116,21,112,19,"stringify"],[116,30,112,28],[116,31,112,29],[117,12,112,31,"refresh_token"],[117,25,112,44],[117,27,112,46,"refreshToken"],[118,10,112,59],[118,11,112,60],[119,8,113,6],[119,9,113,7],[119,10,113,8],[120,8,115,6],[120,12,115,10,"response"],[120,20,115,18],[120,21,115,19,"ok"],[120,23,115,21],[120,25,115,23],[121,10,116,8],[121,16,116,14,"data"],[121,20,116,18],[121,23,116,21],[121,29,116,27,"response"],[121,37,116,35],[121,38,116,36,"json"],[121,42,116,40],[121,43,116,41],[121,44,116,42],[122,10,117,8],[122,16,117,14],[122,20,117,18],[122,21,117,19,"storeTokens"],[122,32,117,30],[122,33,118,10,"data"],[122,37,118,14],[122,38,118,15,"access_token"],[122,50,118,27],[122,52,119,10,"data"],[122,56,119,14],[122,57,119,15,"refresh_token"],[122,70,119,28],[122,72,120,10,"data"],[122,76,120,14],[122,77,120,15,"expires_in"],[122,87,120,25],[122,89,121,10,"data"],[122,93,121,14],[122,94,121,15,"refresh_expires_in"],[122,112,122,8],[122,113,122,9],[123,10,123,8],[123,17,123,15],[123,21,123,19],[124,8,124,6],[125,8,126,6],[125,15,126,13],[125,20,126,18],[126,6,127,4],[126,7,127,5],[126,8,127,6],[126,15,127,13,"error"],[126,20,127,18],[126,22,127,20],[127,8,128,6,"console"],[127,15,128,13],[127,16,128,14,"error"],[127,21,128,19],[127,22,128,20],[127,44,128,42],[127,46,128,44,"error"],[127,51,128,49],[127,52,128,50],[128,8,129,6],[128,15,129,13],[128,20,129,18],[129,6,130,4],[130,4,131,2],[131,2,132,0],[131,3,132,1],[132,0,132,2],[132,3]],"functionMap":{"names":["<global>","storage.setItem","storage.getItem","storage.deleteItem","TokenManager.storeTokens","TokenManager.getAccessToken","TokenManager.getRefreshToken","TokenManager.isAccessTokenExpired","TokenManager.isRefreshTokenExpired","TokenManager.clearTokens","TokenManager.refreshAccessToken"],"mappings":"AAA;ECa;GDM;EEE;GFM;EGE;GHM;EIK;GJe;EKG;GLE;EMG;GNE;EOG;GPS;EQG;GRM;ESG;GTO;EUG;GV+B"},"hasCjsExports":false},"type":"js/module"}]}