<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>GeoProx - Sign in</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      color-scheme: dark;
      --bg: #0b1724;
      --panel: #13263c;
      --accent: #2b7cff;
      --accent-dim: #1c5fe6;
      --text: #e6f1ff;
      --muted: #96a8c0;
      --error: #ff8a8a;
      --overlay-bg: rgba(5, 12, 21, 0.82);
      --modal-bg: #152b44;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #152d45 0%, #09121d 60%);
      font-family: "Segoe UI", system-ui, sans-serif;
      color: var(--text);
      padding: 16px;
    }
    .card {
      width: min(420px, 100%);
      background: var(--panel);
      border-radius: 18px;
      padding: 32px;
      box-shadow: 0 18px 40px rgba(6, 18, 29, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.04);
      position: relative;
      z-index: 1;
    }
    .logo {
      display: block;
      width: 86px;
      margin: 0 auto 18px;
    }
    h1 {
      margin: 0;
      text-align: center;
      font-size: 1.8rem;
      font-weight: 600;
    }
    p.subtitle {
      text-align: center;
      color: var(--muted);
      margin: 6px 0 28px;
      font-size: 0.95rem;
    }
    label {
      display: block;
      font-size: 0.85rem;
      color: var(--muted);
      margin-bottom: 6px;
    }
    input[type="text"],
    input[type="password"] {
      width: 100%;
      background: #0f1f31;
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 10px;
      color: var(--text);
      padding: 12px 14px;
      font-size: 1rem;
      margin-bottom: 18px;
    }
    .checkbox-row {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin-bottom: 20px;
      color: var(--muted);
      font-size: 0.82rem;
    }
    .checkbox-row input[type="checkbox"] {
      margin-top: 2px;
    }
    .checkbox-row a {
      color: var(--accent);
      cursor: pointer;
    }
    .primary {
      width: 100%;
      padding: 12px 14px;
      border-radius: 10px;
      border: none;
      background: linear-gradient(135deg, var(--accent), var(--accent-dim));
      color: white;
      font-size: 1.05rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.12s ease, box-shadow 0.12s ease;
    }
    .primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 24px rgba(43, 124, 255, 0.25);
    }
    .error {
      background: rgba(255, 90, 90, 0.12);
      border: 1px solid rgba(255, 138, 138, 0.35);
      color: var(--error);
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 0.92rem;
      margin-bottom: 20px;
      text-align: center;
    }
    .footer {
      margin-top: 20px;
      text-align: center;
      font-size: 0.82rem;
      color: var(--muted);
    }
    a {
      color: var(--accent);
      text-decoration: none;
    }
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: var(--overlay-bg);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 32px;
      z-index: 10;
    }
    .modal {
      background: var(--modal-bg);
      border-radius: 16px;
      max-width: 720px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      padding: 28px 32px;
      box-shadow: 0 20px 48px rgba(0, 0, 0, 0.45);
      border: 1px solid rgba(255, 255, 255, 0.08);
      color: var(--text);
    }
    .modal h2 {
      margin-top: 0;
      font-size: 1.35rem;
    }
    .modal p {
      font-size: 0.9rem;
      line-height: 1.55;
      color: var(--muted);
      margin: 0 0 12px;
    }
    .modal button {
      margin-top: 16px;
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      background: var(--accent);
      color: #fff;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="card">
    <img class="logo" src="/static/geoprox-logo.png" alt="GeoProx logo" />
    <h1>Welcome to GeoProx</h1>
    <p class="subtitle">Sign in to run proximity searches</p>

    {% if error %}
      <div class="error">{{ error }}</div>
    {% endif %}

    <form id="loginForm" method="post" action="/login">
      <label for="username">Username</label>
      <input id="username" name="username" type="text" value="{{ username }}" autocomplete="username" required />

      <label for="password">Password</label>
      <input id="password" name="password" type="password" autocomplete="current-password" required />

      <div class="checkbox-row">
        <input id="terms" name="terms" type="checkbox" required />
        <label for="terms">I have read and accept the <a id="termsLink">terms and conditions</a>.</label>
      </div>

      <button class="primary" type="submit">Sign in</button>
    </form>

    <div class="footer">
      Need access? Contact your GeoProx administrator.
    </div>
  </div>

  <div class="modal-overlay" id="termsModal">
    <div class="modal">
      <h2>GeoProx — Terms &amp; Conditions of Use</h2>
      <p><strong>1. Service Description</strong><br>
      GeoProx is an online portal designed to assist utilities contractors, civils contractors, and streetworks teams in completing desktop risk assessments. The tool connects in real time to publicly available records and scans a defined geographic radius each time a search is completed.</p>
      <p><strong>2. Accuracy of Results</strong><br>
      While GeoProx uses live data feeds and best-available records, the results it produces are dependent on third-party and public datasets. GeoProx cannot guarantee that all sites of interest will be identified, and it is possible that unofficial, unregistered, or otherwise incomplete records may not appear in search results.</p>
      <p><strong>3. User Responsibility</strong><br>
      The outputs generated by GeoProx (including but not limited to reports, maps, classifications, and risk bands) are provided for informational purposes only. It remains the responsibility of the user to verify the results and to ensure compliance with all applicable laws, permits, and safety requirements.</p>
      <p><strong>4. Limitation of Liability</strong><br>
      GeoProx, Glidepath Solutions Ltd, and its affiliates accept no liability for any inaccuracies, omissions, or errors in the results; any consequences arising from reliance on outputs generated by GeoProx; or any delays, project costs, damages, or losses (direct, indirect, or consequential) resulting from the use of the tool.</p>
      <p><strong>5. Indemnity</strong><br>
      By using GeoProx, you agree to indemnify and hold harmless GeoProx, Glidepath Solutions Ltd, and their employees, officers, and affiliates from any claims, liabilities, damages, or expenses arising from your use of the tool or reliance on its outputs.</p>
      <p><strong>6. Beta Testing / Free Trial Clause</strong><br>
      If you are using GeoProx under a free trial, pilot programme, or beta test: the service is provided strictly “as is” and “as available.” No warranties, express or implied, are made regarding accuracy, reliability, or fitness for purpose. Glidepath Solutions Ltd reserves the right to modify, suspend, or terminate access to the service at any time without notice. All limitations of liability and indemnities in these Terms apply equally during trial use.</p>
      <p><strong>7. Acceptance</strong><br>
      By accessing or using GeoProx, you acknowledge that you have read, understood, and agreed to these Terms &amp; Conditions.</p>
      <button id="closeTerms">Close</button>
    </div>
  </div>

  <script>
    const form = document.getElementById('loginForm');
    const termsCheckbox = document.getElementById('terms');
    const termsLink = document.getElementById('termsLink');
    const modal = document.getElementById('termsModal');
    const closeTerms = document.getElementById('closeTerms');

    termsLink.addEventListener('click', (event) => {
      event.preventDefault();
      modal.style.display = 'flex';
    });

    closeTerms.addEventListener('click', () => {
      modal.style.display = 'none';
    });

    modal.addEventListener('click', (event) => {
      if (event.target === modal) {
        modal.style.display = 'none';
      }
    });

    form.addEventListener('submit', (event) => {
      if (!termsCheckbox.checked) {
        event.preventDefault();
        alert('You must accept the terms and conditions before signing in.');
      }
    });
  </script>
</body>
</html>